{% extends "base.html" %}
{% block title %}HR Dashboard{% endblock %}

{% block content %}

<h1 class="title">HR Dashboard</h1>

<div class="card">
<h2>Job Description</h2>
<form action="/update-jd" method="POST">
<textarea name="job_description" rows="10" style="width:100%;">{{ jd_content }}</textarea>
<br><br>
<button type="submit">Update Job Description</button>
</form>
</div>

<div class="button-group">
<button onclick="filterBy('fuzzy')">Filter Fuzzy > 7</button>
<button onclick="filterBy('ann')">Filter ANN > 7</button>
<button onclick="resetFilter()">Show All</button>
</div>

{% if files %}
{% for file in files %}
<div class="card">
<p><strong>User ID:</strong> {{ file.id }}</p>
<p><strong>Filename:</strong>
<a href="/uploads/{{ file.filename }}" target="_blank">{{ file.filename }}</a>
</p>

<p><strong>Fuzzy Score:</strong> <span class="fuzzy">{{ file.suggested_score }}</span>/10</p>
<p><strong>ANN Score:</strong> <span class="ann">{{ file.ann_score }}</span>/10</p>
<p><strong>HR Score:</strong> {{ file.score if file.score != 'Not yet scored' else 'Not yet scored' }}</p>

<input type="number" min="0" max="10" step="0.1"
id="score-{{ file.id }}"
placeholder="Enter score"
class="score-input"/>

<div class="button-group">
<button onclick="submitScore('{{ file.id }}')">Submit Score</button>
<button onclick="downloadResume('{{ file.id }}')">Download</button>
<button onclick="deleteResume('{{ file.id }}')">Delete</button>
</div>
</div>
{% endfor %}
{% else %}
<p>No resumes uploaded yet.</p>
{% endif %}

<script src="{{ url_for('static', filename='script.js') }}"></script>

{% endblock %}
